<!DOCTYPE>
<html>

<head>
    <title> 训练</title>
</head>

<body>
    <img id="showImg" src="" alt="">

    <form role="form" id="myForm" action="#" method="post" enctype="multipart/form-data">
        <!-- <input type="hidden" name="_id" id="_id"> -->
        <div class="form-group">
            <label class="col-sm-2 control-label">说明:</label>

            <div class="col-sm-10">
                <p class="form-control-static ">ajax 文件上传 。</p>
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择1:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar1" id="file_upload1" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择2:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar2" id="file_upload2" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择3:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar3" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择4:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar4" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择5:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar5" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择6:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar6" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择7:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar7" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择8:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar8" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择9:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar9" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>图片选择10:</label>

            <div class="col-sm-7">
                <input type="file" name="fulAvatar10" id="file_upload3" value="" class="form-control file" placeholder="图片地址">
            </div>
        </div>
        <div class="form-group">
            <label for="url" class="col-sm-2 control-label "><s>*</s>姓名:</label>
            <div class="col-sm-7">
                <input type="text" name="classNames" value="" id="classNames" class="form-control file" placeholder="姓名">
            </div>
        </div>

    </form>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-7">

            <button id="btnAjax" onclick="uploadByForm();">提交训练</button>
        </div>
    </div>
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            // $("#_id").val(genID(24))
        })
        function genID(length) {
            return Number(Math.random().toString().substr(3, length) + Date.now()).toString(36);
        };
        /**
         * ajax 上传。
         */
        function uploadByForm() {
            //用form 表单直接 构造formData 对象; 就不需要下面的append 方法来为表单进行赋值了。
            var formData = new FormData($("#myForm")[0]);
            // var url = "http://localhost:3000/uploader";
            var url = "http://localhost:3000/upImgToTrain";
            $.ajax({
                url: url,
                type: 'POST',
                data: formData,
                /**
                 * 必须false才会避开jQuery对 formdata 的默认处理
                 * XMLHttpRequest会对 formdata 进行正确的处理
                 */
                processData: false,
                /**
                 *必须false才会自动加上正确的Content-Type
                 */
                contentType: false,
                success: function (responseStr) {
                    // alert(responseStr.newPath);
                    // $("img").attr({"src": responseStr.newPath}).prependTo($("body"));
                    if(responseStr.status==0){
                        $(".file").val('');
                    }
                },
                error: function (responseStr) {
                    // alert(responseStr.newPath);
                }
            });
        }
    </script>
</body>

</html>

</html>